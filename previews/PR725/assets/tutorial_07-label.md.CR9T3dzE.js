import{_ as i,o as a,c as l,aA as n}from"./chunks/framework.DSs4OLzh.js";const M=JSON.parse('{"title":"Using Labels to reconstruct multi-slice / multi-contrast sequences","description":"","frontmatter":{},"headers":[],"relativePath":"tutorial/07-label.md","filePath":"tutorial/07-label.md","lastUpdated":null}'),t={name:"tutorial/07-label.md"};function h(e,s,p,k,d,E){return a(),l("div",null,[...s[0]||(s[0]=[n(`<h1 id="Using-Labels-to-reconstruct-multi-slice-/-multi-contrast-sequences" tabindex="-1">Using Labels to reconstruct multi-slice / multi-contrast sequences <a class="header-anchor" href="#Using-Labels-to-reconstruct-multi-slice-/-multi-contrast-sequences" aria-label="Permalink to &quot;Using Labels to reconstruct multi-slice / multi-contrast sequences {#Using-Labels-to-reconstruct-multi-slice-/-multi-contrast-sequences}&quot;">​</a></h1><p><a href="./07-label.jl" download><img src="https://img.shields.io/badge/julia-script-9558B2?logo=julia" alt="julia script"></a> <a href="./07-label.ipynb" download><img src="https://img.shields.io/badge/jupyter-notebook-blue?logo=jupyter" alt="jupyter notebook"></a> <a href="https://mybinder.org/v2/gh/JuliaHealth/KomaMRI.jl/master?urlpath=git-pull%3Frepo%3Dhttps%253A%252F%252Fgithub.com%252FJuliaHealth%252FKomaMRI.jl%26urlpath%3Dlab%252Ftree%252FKomaMRI.jl%252Fdev%252Ftutorial%252F07-label.ipynb%26branch%3Dgh-pages" target="_blank"><img src="https://mybinder.org/badge_logo.svg" alt="launch binder"></a></p><p>This is generally done in pulseq / pypulseq. In that case, the sequence structure automatically contains the labels increment and set extension.</p><p>Here we will show how to modify a sequence in KomaMRI to add the extension</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> KomaMRI, PlotlyJS, Suppressor </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># hide</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sys </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Scanner</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># hide</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> brain_phantom3D</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Δw .</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Removes the off-resonance</span></span></code></pre></div><h2 id="How-to-add-label-to-a-sequence" tabindex="-1">How to add label to a sequence <a class="header-anchor" href="#How-to-add-label-to-a-sequence" aria-label="Permalink to &quot;How to add label to a sequence {#How-to-add-label-to-a-sequence}&quot;">​</a></h2><p>Let&#39;s add the label to increment the slice for each seq_EPI block. We will add that to the first block of the sequence</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">seq_EPI </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PulseDesigner</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">EPI_example</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">seq </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> deepcopy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(seq_EPI);</span></span></code></pre></div><p>We can create 2 different types of label &quot;Increment&quot; and &quot;Set&quot; with <code>LabelInc</code> and <code>LabelSet</code></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">lSlcInc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> LabelInc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;SLC&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>Let&#39;s change the extension field of the first block of seq_EPI in order to add an increment to the SLC label</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">seq_EPI</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EXT[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [lSlcInc];</span></span></code></pre></div><p>Now let&#39;s merge 3 seq_EPI. We now have 1 EPI sequence without EXTENSION, then we have an increment of the SLC label, and another one at the beginning of the last seq_EPI</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">seq </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> seq </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> seq_EPI </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> seq_EPI</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">plot_seq</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(seq);</span></span></code></pre></div><p>We can extract the label value with the following function</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">l </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> get_label</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(seq);</span></span></code></pre></div><p>And store in a vector only the value of the SLC label</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SLC_vec </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [l[i]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SLC </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> eachindex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(l)];</span></span></code></pre></div><p>The value is equal to 0 until we reach LabelInc(1,&quot;SLC)</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">p1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(SLC_vec, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Layout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    xaxis_title</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;n° blocks&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    yaxis_title</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;SLC label&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><p><object type="text/html" data="data:text/html;base64,PGh0bWw+CjxoZWFkPjxtZXRhIGNoYXJzZXQ9InV0Zi04IiAvPjwvaGVhZD4KPGJvZHkgc3R5bGU9Im1hcmdpbjowO292ZXJmbG93OmhpZGRlbjsiPgo8ZGl2PgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL21hdGhqYXgvMi43LjUvTWF0aEpheC5qcz9jb25maWc9VGVYLUFNUy1NTUxfU1ZHIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4Kd2luZG93LlBsb3RseUNvbmZpZyA9IHtNYXRoSmF4Q29uZmlnOiAnbG9jYWwnfTsKPC9zY3JpcHQ+CjxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5wbG90Lmx5L3Bsb3RseS0yLjMzLjAubWluLmpzIj48L3NjcmlwdD4KCiAgICA8ZGl2CiAgICAgICAgaWQ9ZjllNDJiYTYtMjlkMi00MmU5LWJjMjUtZGY4NDA0MDA0ZDVhCiAgICAgICAgY2xhc3M9InBsb3RseS1ncmFwaC1kaXYiCiAgICAgICAgc3R5bGU9ImhlaWdodDoxMDAlOyB3aWR0aDoxMDAlOyI+CiAgICA8L2Rpdj4KICAgIDxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4KICAgICAgICAKICAgICAgICB3aW5kb3cuUExPVExZRU5WID0gd2luZG93LlBMT1RMWUVOViB8fCB7fQogICAgICAgIAogICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZjllNDJiYTYtMjlkMi00MmU5LWJjMjUtZGY4NDA0MDA0ZDVhJykpIHsKICAgIFBsb3RseS5uZXdQbG90KAogICAgICAgICdmOWU0MmJhNi0yOWQyLTQyZTktYmMyNS1kZjg0MDQwMDRkNWEnLAogICAgICAgIFt7InkiOlswLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMiwyLDIsMl0sInR5cGUiOiJzY2F0dGVyIiwieCI6WzEsMiwzLDQsNSw2LDcsOCw5LDEwLDExLDEyLDEzLDE0LDE1LDE2LDE3LDE4LDE5LDIwLDIxLDIyLDIzLDI0LDI1LDI2LDI3LDI4LDI5LDMwLDMxLDMyLDMzLDM0LDM1LDM2LDM3LDM4LDM5LDQwLDQxLDQyLDQzLDQ0LDQ1LDQ2LDQ3LDQ4LDQ5LDUwLDUxLDUyLDUzLDU0LDU1LDU2LDU3LDU4LDU5LDYwLDYxLDYyLDYzLDY0LDY1LDY2LDY3LDY4LDY5LDcwLDcxLDcyLDczLDc0LDc1LDc2LDc3LDc4LDc5LDgwLDgxLDgyLDgzLDg0LDg1LDg2LDg3LDg4LDg5LDkwLDkxLDkyLDkzLDk0LDk1LDk2LDk3LDk4LDk5LDEwMCwxMDEsMTAyLDEwMywxMDQsMTA1LDEwNiwxMDcsMTA4LDEwOSwxMTAsMTExLDExMiwxMTMsMTE0LDExNSwxMTYsMTE3LDExOCwxMTksMTIwLDEyMSwxMjIsMTIzLDEyNCwxMjUsMTI2LDEyNywxMjgsMTI5LDEzMCwxMzEsMTMyLDEzMywxMzQsMTM1LDEzNiwxMzcsMTM4LDEzOSwxNDAsMTQxLDE0MiwxNDMsMTQ0LDE0NSwxNDYsMTQ3LDE0OCwxNDksMTUwLDE1MSwxNTIsMTUzLDE1NCwxNTUsMTU2LDE1NywxNTgsMTU5LDE2MCwxNjEsMTYyLDE2MywxNjQsMTY1LDE2NiwxNjcsMTY4LDE2OSwxNzAsMTcxLDE3MiwxNzMsMTc0LDE3NSwxNzYsMTc3LDE3OCwxNzksMTgwLDE4MSwxODIsMTgzLDE4NCwxODUsMTg2LDE4NywxODgsMTg5LDE5MCwxOTEsMTkyLDE5MywxOTQsMTk1LDE5NiwxOTcsMTk4LDE5OSwyMDAsMjAxLDIwMiwyMDMsMjA0LDIwNSwyMDYsMjA3LDIwOCwyMDksMjEwLDIxMSwyMTIsMjEzLDIxNCwyMTUsMjE2LDIxNywyMTgsMjE5LDIyMCwyMjEsMjIyLDIyMywyMjQsMjI1LDIyNiwyMjcsMjI4LDIyOSwyMzAsMjMxLDIzMiwyMzMsMjM0LDIzNSwyMzYsMjM3LDIzOCwyMzksMjQwLDI0MSwyNDIsMjQzLDI0NCwyNDUsMjQ2LDI0NywyNDgsMjQ5LDI1MCwyNTEsMjUyLDI1MywyNTQsMjU1LDI1NiwyNTcsMjU4LDI1OSwyNjAsMjYxLDI2MiwyNjMsMjY0LDI2NSwyNjYsMjY3LDI2OCwyNjksMjcwLDI3MSwyNzIsMjczLDI3NCwyNzUsMjc2LDI3NywyNzgsMjc5LDI4MCwyODEsMjgyLDI4MywyODQsMjg1LDI4NiwyODcsMjg4LDI4OSwyOTAsMjkxLDI5MiwyOTMsMjk0LDI5NSwyOTYsMjk3LDI5OCwyOTksMzAwLDMwMSwzMDIsMzAzLDMwNCwzMDUsMzA2LDMwNywzMDgsMzA5LDMxMCwzMTEsMzEyLDMxMywzMTQsMzE1LDMxNiwzMTcsMzE4LDMxOSwzMjAsMzIxLDMyMiwzMjMsMzI0LDMyNSwzMjYsMzI3LDMyOCwzMjksMzMwLDMzMSwzMzIsMzMzLDMzNCwzMzUsMzM2LDMzNywzMzgsMzM5LDM0MCwzNDEsMzQyLDM0MywzNDQsMzQ1LDM0NiwzNDcsMzQ4LDM0OSwzNTAsMzUxLDM1MiwzNTMsMzU0LDM1NSwzNTYsMzU3LDM1OCwzNTksMzYwLDM2MSwzNjIsMzYzLDM2NCwzNjUsMzY2LDM2NywzNjgsMzY5LDM3MCwzNzEsMzcyLDM3MywzNzQsMzc1LDM3NiwzNzcsMzc4LDM3OSwzODAsMzgxLDM4MiwzODMsMzg0LDM4NSwzODYsMzg3LDM4OCwzODksMzkwLDM5MSwzOTIsMzkzLDM5NCwzOTUsMzk2LDM5NywzOTgsMzk5LDQwMCw0MDEsNDAyLDQwMyw0MDQsNDA1LDQwNiw0MDcsNDA4LDQwOSw0MTAsNDExLDQxMiw0MTMsNDE0LDQxNSw0MTYsNDE3LDQxOCw0MTksNDIwLDQyMSw0MjIsNDIzLDQyNCw0MjUsNDI2LDQyNyw0MjgsNDI5LDQzMCw0MzEsNDMyLDQzMyw0MzQsNDM1LDQzNiw0MzcsNDM4LDQzOSw0NDAsNDQxLDQ0Miw0NDMsNDQ0LDQ0NSw0NDYsNDQ3LDQ0OCw0NDksNDUwLDQ1MSw0NTIsNDUzLDQ1NCw0NTUsNDU2LDQ1Nyw0NTgsNDU5LDQ2MCw0NjEsNDYyLDQ2Myw0NjQsNDY1LDQ2Niw0NjcsNDY4LDQ2OSw0NzAsNDcxLDQ3Miw0NzMsNDc0LDQ3NSw0NzYsNDc3LDQ3OCw0NzksNDgwLDQ4MSw0ODIsNDgzLDQ4NCw0ODUsNDg2LDQ4Nyw0ODgsNDg5LDQ5MCw0OTEsNDkyLDQ5Myw0OTQsNDk1LDQ5Niw0OTcsNDk4LDQ5OSw1MDAsNTAxLDUwMiw1MDMsNTA0LDUwNSw1MDYsNTA3LDUwOCw1MDksNTEwLDUxMSw1MTIsNTEzLDUxNCw1MTUsNTE2LDUxNyw1MTgsNTE5LDUyMCw1MjEsNTIyLDUyMyw1MjQsNTI1LDUyNiw1MjcsNTI4LDUyOSw1MzAsNTMxLDUzMiw1MzMsNTM0LDUzNSw1MzYsNTM3LDUzOCw1MzksNTQwLDU0MSw1NDIsNTQzLDU0NCw1NDUsNTQ2LDU0Nyw1NDgsNTQ5LDU1MCw1NTEsNTUyLDU1Myw1NTQsNTU1LDU1Niw1NTcsNTU4LDU1OSw1NjAsNTYxLDU2Miw1NjMsNTY0LDU2NSw1NjYsNTY3LDU2OCw1NjksNTcwLDU3MSw1NzIsNTczLDU3NCw1NzUsNTc2LDU3Nyw1NzgsNTc5LDU4MCw1ODEsNTgyLDU4Myw1ODQsNTg1LDU4Niw1ODcsNTg4LDU4OSw1OTAsNTkxLDU5Miw1OTMsNTk0LDU5NSw1OTYsNTk3LDU5OCw1OTksNjAwLDYwMSw2MDIsNjAzLDYwNCw2MDUsNjA2LDYwNyw2MDgsNjA5LDYxMCw2MTEsNjEyXX1dLAogICAgICAgIHsieGF4aXMiOnsidGl0bGUiOnsidGV4dCI6Im7CsCBibG9ja3MifX0sInRlbXBsYXRlIjp7ImxheW91dCI6eyJjb2xvcmF4aXMiOnsiY29sb3JiYXIiOnsidGlja3MiOiIiLCJvdXRsaW5ld2lkdGgiOjB9fSwieGF4aXMiOnsiZ3JpZGNvbG9yIjoid2hpdGUiLCJ6ZXJvbGluZXdpZHRoIjoyLCJ0aXRsZSI6eyJzdGFuZG9mZiI6MTV9LCJ0aWNrcyI6IiIsInplcm9saW5lY29sb3IiOiJ3aGl0ZSIsImF1dG9tYXJnaW4iOnRydWUsImxpbmVjb2xvciI6IndoaXRlIn0sImhvdmVybW9kZSI6ImNsb3Nlc3QiLCJwYXBlcl9iZ2NvbG9yIjoid2hpdGUiLCJnZW8iOnsic2hvd2xha2VzIjp0cnVlLCJzaG93bGFuZCI6dHJ1ZSwibGFuZGNvbG9yIjoiI0U1RUNGNiIsImJnY29sb3IiOiJ3aGl0ZSIsInN1YnVuaXRjb2xvciI6IndoaXRlIiwibGFrZWNvbG9yIjoid2hpdGUifSwiY29sb3JzY2FsZSI6eyJzZXF1ZW50aWFsIjpbWzAuMCwiIzBkMDg4NyJdLFswLjExMTExMTExMTExMTExMTEsIiM0NjAzOWYiXSxbMC4yMjIyMjIyMjIyMjIyMjIyLCIjNzIwMWE4Il0sWzAuMzMzMzMzMzMzMzMzMzMzMywiIzljMTc5ZSJdLFswLjQ0NDQ0NDQ0NDQ0NDQ0NDQsIiNiZDM3ODYiXSxbMC41NTU1NTU1NTU1NTU1NTU2LCIjZDg1NzZiIl0sWzAuNjY2NjY2NjY2NjY2NjY2NiwiI2VkNzk1MyJdLFswLjc3Nzc3Nzc3Nzc3Nzc3NzgsIiNmYjlmM2EiXSxbMC44ODg4ODg4ODg4ODg4ODg4LCIjZmRjYTI2Il0sWzEuMCwiI2YwZjkyMSJdXSwiZGl2ZXJnaW5nIjpbWzAsIiM4ZTAxNTIiXSxbMC4xLCIjYzUxYjdkIl0sWzAuMiwiI2RlNzdhZSJdLFswLjMsIiNmMWI2ZGEiXSxbMC40LCIjZmRlMGVmIl0sWzAuNSwiI2Y3ZjdmNyJdLFswLjYsIiNlNmY1ZDAiXSxbMC43LCIjYjhlMTg2Il0sWzAuOCwiIzdmYmM0MSJdLFswLjksIiM0ZDkyMjEiXSxbMSwiIzI3NjQxOSJdXSwic2VxdWVudGlhbG1pbnVzIjpbWzAuMCwiIzBkMDg4NyJdLFswLjExMTExMTExMTExMTExMTEsIiM0NjAzOWYiXSxbMC4yMjIyMjIyMjIyMjIyMjIyLCIjNzIwMWE4Il0sWzAuMzMzMzMzMzMzMzMzMzMzMywiIzljMTc5ZSJdLFswLjQ0NDQ0NDQ0NDQ0NDQ0NDQsIiNiZDM3ODYiXSxbMC41NTU1NTU1NTU1NTU1NTU2LCIjZDg1NzZiIl0sWzAuNjY2NjY2NjY2NjY2NjY2NiwiI2VkNzk1MyJdLFswLjc3Nzc3Nzc3Nzc3Nzc3NzgsIiNmYjlmM2EiXSxbMC44ODg4ODg4ODg4ODg4ODg4LCIjZmRjYTI2Il0sWzEuMCwiI2YwZjkyMSJdXX0sInlheGlzIjp7ImdyaWRjb2xvciI6IndoaXRlIiwiemVyb2xpbmV3aWR0aCI6MiwidGl0bGUiOnsic3RhbmRvZmYiOjE1fSwidGlja3MiOiIiLCJ6ZXJvbGluZWNvbG9yIjoid2hpdGUiLCJhdXRvbWFyZ2luIjp0cnVlLCJsaW5lY29sb3IiOiJ3aGl0ZSJ9LCJzaGFwZWRlZmF1bHRzIjp7ImxpbmUiOnsiY29sb3IiOiIjMmEzZjVmIn19LCJob3ZlcmxhYmVsIjp7ImFsaWduIjoibGVmdCJ9LCJtYXBib3giOnsic3R5bGUiOiJsaWdodCJ9LCJwb2xhciI6eyJhbmd1bGFyYXhpcyI6eyJncmlkY29sb3IiOiJ3aGl0ZSIsInRpY2tzIjoiIiwibGluZWNvbG9yIjoid2hpdGUifSwiYmdjb2xvciI6IiNFNUVDRjYiLCJyYWRpYWxheGlzIjp7ImdyaWRjb2xvciI6IndoaXRlIiwidGlja3MiOiIiLCJsaW5lY29sb3IiOiJ3aGl0ZSJ9fSwiYXV0b3R5cGVudW1iZXJzIjoic3RyaWN0IiwiZm9udCI6eyJjb2xvciI6IiMyYTNmNWYifSwidGVybmFyeSI6eyJhYXhpcyI6eyJncmlkY29sb3IiOiJ3aGl0ZSIsInRpY2tzIjoiIiwibGluZWNvbG9yIjoid2hpdGUifSwiYmdjb2xvciI6IiNFNUVDRjYiLCJjYXhpcyI6eyJncmlkY29sb3IiOiJ3aGl0ZSIsInRpY2tzIjoiIiwibGluZWNvbG9yIjoid2hpdGUifSwiYmF4aXMiOnsiZ3JpZGNvbG9yIjoid2hpdGUiLCJ0aWNrcyI6IiIsImxpbmVjb2xvciI6IndoaXRlIn19LCJhbm5vdGF0aW9uZGVmYXVsdHMiOnsiYXJyb3doZWFkIjowLCJhcnJvd3dpZHRoIjoxLCJhcnJvd2NvbG9yIjoiIzJhM2Y1ZiJ9LCJwbG90X2JnY29sb3IiOiIjRTVFQ0Y2IiwidGl0bGUiOnsieCI6MC4wNX0sInNjZW5lIjp7InhheGlzIjp7ImdyaWRjb2xvciI6IndoaXRlIiwiZ3JpZHdpZHRoIjoyLCJiYWNrZ3JvdW5kY29sb3IiOiIjRTVFQ0Y2IiwidGlja3MiOiIiLCJzaG93YmFja2dyb3VuZCI6dHJ1ZSwiemVyb2xpbmVjb2xvciI6IndoaXRlIiwibGluZWNvbG9yIjoid2hpdGUifSwiemF4aXMiOnsiZ3JpZGNvbG9yIjoid2hpdGUiLCJncmlkd2lkdGgiOjIsImJhY2tncm91bmRjb2xvciI6IiNFNUVDRjYiLCJ0aWNrcyI6IiIsInNob3diYWNrZ3JvdW5kIjp0cnVlLCJ6ZXJvbGluZWNvbG9yIjoid2hpdGUiLCJsaW5lY29sb3IiOiJ3aGl0ZSJ9LCJ5YXhpcyI6eyJncmlkY29sb3IiOiJ3aGl0ZSIsImdyaWR3aWR0aCI6MiwiYmFja2dyb3VuZGNvbG9yIjoiI0U1RUNGNiIsInRpY2tzIjoiIiwic2hvd2JhY2tncm91bmQiOnRydWUsInplcm9saW5lY29sb3IiOiJ3aGl0ZSIsImxpbmVjb2xvciI6IndoaXRlIn19LCJjb2xvcndheSI6WyIjNjM2ZWZhIiwiI0VGNTUzQiIsIiMwMGNjOTYiLCIjYWI2M2ZhIiwiI0ZGQTE1QSIsIiMxOWQzZjMiLCIjRkY2NjkyIiwiI0I2RTg4MCIsIiNGRjk3RkYiLCIjRkVDQjUyIl19LCJkYXRhIjp7InNjYXR0ZXJwb2xhcmdsIjpbeyJ0eXBlIjoic2NhdHRlcnBvbGFyZ2wiLCJtYXJrZXIiOnsiY29sb3JiYXIiOnsidGlja3MiOiIiLCJvdXRsaW5ld2lkdGgiOjB9fX1dLCJjYXJwZXQiOlt7ImJheGlzIjp7ImdyaWRjb2xvciI6IndoaXRlIiwiZW5kbGluZWNvbG9yIjoiIzJhM2Y1ZiIsIm1pbm9yZ3JpZGNvbG9yIjoid2hpdGUiLCJzdGFydGxpbmVjb2xvciI6IiMyYTNmNWYiLCJsaW5lY29sb3IiOiJ3aGl0ZSJ9LCJ0eXBlIjoiY2FycGV0IiwiYWF4aXMiOnsiZ3JpZGNvbG9yIjoid2hpdGUiLCJlbmRsaW5lY29sb3IiOiIjMmEzZjVmIiwibWlub3JncmlkY29sb3IiOiJ3aGl0ZSIsInN0YXJ0bGluZWNvbG9yIjoiIzJhM2Y1ZiIsImxpbmVjb2xvciI6IndoaXRlIn19XSwic2NhdHRlcnBvbGFyIjpbeyJ0eXBlIjoic2NhdHRlcnBvbGFyIiwibWFya2VyIjp7ImNvbG9yYmFyIjp7InRpY2tzIjoiIiwib3V0bGluZXdpZHRoIjowfX19XSwicGFyY29vcmRzIjpbeyJsaW5lIjp7ImNvbG9yYmFyIjp7InRpY2tzIjoiIiwib3V0bGluZXdpZHRoIjowfX0sInR5cGUiOiJwYXJjb29yZHMifV0sInNjYXR0ZXIiOlt7InR5cGUiOiJzY2F0dGVyIiwibWFya2VyIjp7ImNvbG9yYmFyIjp7InRpY2tzIjoiIiwib3V0bGluZXdpZHRoIjowfX19XSwiaGlzdG9ncmFtMmRjb250b3VyIjpbeyJjb2xvcmJhciI6eyJ0aWNrcyI6IiIsIm91dGxpbmV3aWR0aCI6MH0sInR5cGUiOiJoaXN0b2dyYW0yZGNvbnRvdXIiLCJjb2xvcnNjYWxlIjpbWzAuMCwiIzBkMDg4NyJdLFswLjExMTExMTExMTExMTExMTEsIiM0NjAzOWYiXSxbMC4yMjIyMjIyMjIyMjIyMjIyLCIjNzIwMWE4Il0sWzAuMzMzMzMzMzMzMzMzMzMzMywiIzljMTc5ZSJdLFswLjQ0NDQ0NDQ0NDQ0NDQ0NDQsIiNiZDM3ODYiXSxbMC41NTU1NTU1NTU1NTU1NTU2LCIjZDg1NzZiIl0sWzAuNjY2NjY2NjY2NjY2NjY2NiwiI2VkNzk1MyJdLFswLjc3Nzc3Nzc3Nzc3Nzc3NzgsIiNmYjlmM2EiXSxbMC44ODg4ODg4ODg4ODg4ODg4LCIjZmRjYTI2Il0sWzEuMCwiI2YwZjkyMSJdXX1dLCJjb250b3VyIjpbeyJjb2xvcmJhciI6eyJ0aWNrcyI6IiIsIm91dGxpbmV3aWR0aCI6MH0sInR5cGUiOiJjb250b3VyIiwiY29sb3JzY2FsZSI6W1swLjAsIiMwZDA4ODciXSxbMC4xMTExMTExMTExMTExMTExLCIjNDYwMzlmIl0sWzAuMjIyMjIyMjIyMjIyMjIyMiwiIzcyMDFhOCJdLFswLjMzMzMzMzMzMzMzMzMzMzMsIiM5YzE3OWUiXSxbMC40NDQ0NDQ0NDQ0NDQ0NDQ0LCIjYmQzNzg2Il0sWzAuNTU1NTU1NTU1NTU1NTU1NiwiI2Q4NTc2YiJdLFswLjY2NjY2NjY2NjY2NjY2NjYsIiNlZDc5NTMiXSxbMC43Nzc3Nzc3Nzc3Nzc3Nzc4LCIjZmI5ZjNhIl0sWzAuODg4ODg4ODg4ODg4ODg4OCwiI2ZkY2EyNiJdLFsxLjAsIiNmMGY5MjEiXV19XSwic2NhdHRlcmNhcnBldCI6W3sidHlwZSI6InNjYXR0ZXJjYXJwZXQiLCJtYXJrZXIiOnsiY29sb3JiYXIiOnsidGlja3MiOiIiLCJvdXRsaW5ld2lkdGgiOjB9fX1dLCJtZXNoM2QiOlt7ImNvbG9yYmFyIjp7InRpY2tzIjoiIiwib3V0bGluZXdpZHRoIjowfSwidHlwZSI6Im1lc2gzZCJ9XSwic3VyZmFjZSI6W3siY29sb3JiYXIiOnsidGlja3MiOiIiLCJvdXRsaW5ld2lkdGgiOjB9LCJ0eXBlIjoic3VyZmFjZSIsImNvbG9yc2NhbGUiOltbMC4wLCIjMGQwODg3Il0sWzAuMTExMTExMTExMTExMTExMSwiIzQ2MDM5ZiJdLFswLjIyMjIyMjIyMjIyMjIyMjIsIiM3MjAxYTgiXSxbMC4zMzMzMzMzMzMzMzMzMzMzLCIjOWMxNzllIl0sWzAuNDQ0NDQ0NDQ0NDQ0NDQ0NCwiI2JkMzc4NiJdLFswLjU1NTU1NTU1NTU1NTU1NTYsIiNkODU3NmIiXSxbMC42NjY2NjY2NjY2NjY2NjY2LCIjZWQ3OTUzIl0sWzAuNzc3Nzc3Nzc3Nzc3Nzc3OCwiI2ZiOWYzYSJdLFswLjg4ODg4ODg4ODg4ODg4ODgsIiNmZGNhMjYiXSxbMS4wLCIjZjBmOTIxIl1dfV0sInNjYXR0ZXJtYXBib3giOlt7InR5cGUiOiJzY2F0dGVybWFwYm94IiwibWFya2VyIjp7ImNvbG9yYmFyIjp7InRpY2tzIjoiIiwib3V0bGluZXdpZHRoIjowfX19XSwic2NhdHRlcmdlbyI6W3sidHlwZSI6InNjYXR0ZXJnZW8iLCJtYXJrZXIiOnsiY29sb3JiYXIiOnsidGlja3MiOiIiLCJvdXRsaW5ld2lkdGgiOjB9fX1dLCJoaXN0b2dyYW0iOlt7InR5cGUiOiJoaXN0b2dyYW0iLCJtYXJrZXIiOnsiY29sb3JiYXIiOnsidGlja3MiOiIiLCJvdXRsaW5ld2lkdGgiOjB9fX1dLCJwaWUiOlt7InR5cGUiOiJwaWUiLCJhdXRvbWFyZ2luIjp0cnVlfV0sImNob3JvcGxldGgiOlt7ImNvbG9yYmFyIjp7InRpY2tzIjoiIiwib3V0bGluZXdpZHRoIjowfSwidHlwZSI6ImNob3JvcGxldGgifV0sImhlYXRtYXBnbCI6W3siY29sb3JiYXIiOnsidGlja3MiOiIiLCJvdXRsaW5ld2lkdGgiOjB9LCJ0eXBlIjoiaGVhdG1hcGdsIiwiY29sb3JzY2FsZSI6W1swLjAsIiMwZDA4ODciXSxbMC4xMTExMTExMTExMTExMTExLCIjNDYwMzlmIl0sWzAuMjIyMjIyMjIyMjIyMjIyMiwiIzcyMDFhOCJdLFswLjMzMzMzMzMzMzMzMzMzMzMsIiM5YzE3OWUiXSxbMC40NDQ0NDQ0NDQ0NDQ0NDQ0LCIjYmQzNzg2Il0sWzAuNTU1NTU1NTU1NTU1NTU1NiwiI2Q4NTc2YiJdLFswLjY2NjY2NjY2NjY2NjY2NjYsIiNlZDc5NTMiXSxbMC43Nzc3Nzc3Nzc3Nzc3Nzc4LCIjZmI5ZjNhIl0sWzAuODg4ODg4ODg4ODg4ODg4OCwiI2ZkY2EyNiJdLFsxLjAsIiNmMGY5MjEiXV19XSwiYmFyIjpbeyJ0eXBlIjoiYmFyIiwiZXJyb3JfeSI6eyJjb2xvciI6IiMyYTNmNWYifSwiZXJyb3JfeCI6eyJjb2xvciI6IiMyYTNmNWYifSwibWFya2VyIjp7ImxpbmUiOnsiY29sb3IiOiIjRTVFQ0Y2Iiwid2lkdGgiOjAuNX19fV0sImhlYXRtYXAiOlt7ImNvbG9yYmFyIjp7InRpY2tzIjoiIiwib3V0bGluZXdpZHRoIjowfSwidHlwZSI6ImhlYXRtYXAiLCJjb2xvcnNjYWxlIjpbWzAuMCwiIzBkMDg4NyJdLFswLjExMTExMTExMTExMTExMTEsIiM0NjAzOWYiXSxbMC4yMjIyMjIyMjIyMjIyMjIyLCIjNzIwMWE4Il0sWzAuMzMzMzMzMzMzMzMzMzMzMywiIzljMTc5ZSJdLFswLjQ0NDQ0NDQ0NDQ0NDQ0NDQsIiNiZDM3ODYiXSxbMC41NTU1NTU1NTU1NTU1NTU2LCIjZDg1NzZiIl0sWzAuNjY2NjY2NjY2NjY2NjY2NiwiI2VkNzk1MyJdLFswLjc3Nzc3Nzc3Nzc3Nzc3NzgsIiNmYjlmM2EiXSxbMC44ODg4ODg4ODg4ODg4ODg4LCIjZmRjYTI2Il0sWzEuMCwiI2YwZjkyMSJdXX1dLCJjb250b3VyY2FycGV0IjpbeyJjb2xvcmJhciI6eyJ0aWNrcyI6IiIsIm91dGxpbmV3aWR0aCI6MH0sInR5cGUiOiJjb250b3VyY2FycGV0In1dLCJ0YWJsZSI6W3sidHlwZSI6InRhYmxlIiwiaGVhZGVyIjp7ImxpbmUiOnsiY29sb3IiOiJ3aGl0ZSJ9LCJmaWxsIjp7ImNvbG9yIjoiI0M4RDRFMyJ9fSwiY2VsbHMiOnsibGluZSI6eyJjb2xvciI6IndoaXRlIn0sImZpbGwiOnsiY29sb3IiOiIjRUJGMEY4In19fV0sInNjYXR0ZXIzZCI6W3sibGluZSI6eyJjb2xvcmJhciI6eyJ0aWNrcyI6IiIsIm91dGxpbmV3aWR0aCI6MH19LCJ0eXBlIjoic2NhdHRlcjNkIiwibWFya2VyIjp7ImNvbG9yYmFyIjp7InRpY2tzIjoiIiwib3V0bGluZXdpZHRoIjowfX19XSwiYmFycG9sYXIiOlt7InR5cGUiOiJiYXJwb2xhciIsIm1hcmtlciI6eyJsaW5lIjp7ImNvbG9yIjoiI0U1RUNGNiIsIndpZHRoIjowLjV9fX1dLCJzY2F0dGVyZ2wiOlt7InR5cGUiOiJzY2F0dGVyZ2wiLCJtYXJrZXIiOnsiY29sb3JiYXIiOnsidGlja3MiOiIiLCJvdXRsaW5ld2lkdGgiOjB9fX1dLCJoaXN0b2dyYW0yZCI6W3siY29sb3JiYXIiOnsidGlja3MiOiIiLCJvdXRsaW5ld2lkdGgiOjB9LCJ0eXBlIjoiaGlzdG9ncmFtMmQiLCJjb2xvcnNjYWxlIjpbWzAuMCwiIzBkMDg4NyJdLFswLjExMTExMTExMTExMTExMTEsIiM0NjAzOWYiXSxbMC4yMjIyMjIyMjIyMjIyMjIyLCIjNzIwMWE4Il0sWzAuMzMzMzMzMzMzMzMzMzMzMywiIzljMTc5ZSJdLFswLjQ0NDQ0NDQ0NDQ0NDQ0NDQsIiNiZDM3ODYiXSxbMC41NTU1NTU1NTU1NTU1NTU2LCIjZDg1NzZiIl0sWzAuNjY2NjY2NjY2NjY2NjY2NiwiI2VkNzk1MyJdLFswLjc3Nzc3Nzc3Nzc3Nzc3NzgsIiNmYjlmM2EiXSxbMC44ODg4ODg4ODg4ODg4ODg4LCIjZmRjYTI2Il0sWzEuMCwiI2YwZjkyMSJdXX1dLCJzY2F0dGVydGVybmFyeSI6W3sidHlwZSI6InNjYXR0ZXJ0ZXJuYXJ5IiwibWFya2VyIjp7ImNvbG9yYmFyIjp7InRpY2tzIjoiIiwib3V0bGluZXdpZHRoIjowfX19XX19LCJtYXJnaW4iOnsibCI6NTAsImIiOjUwLCJyIjo1MCwidCI6NjB9LCJ5YXhpcyI6eyJ0aXRsZSI6eyJ0ZXh0IjoiU0xDIGxhYmVsIn19fSwKICAgICAgICB7ImVkaXRhYmxlIjpmYWxzZSwicmVzcG9uc2l2ZSI6dHJ1ZSwic3RhdGljUGxvdCI6ZmFsc2UsInNjcm9sbFpvb20iOnRydWV9LAogICAgKQp9CgogICAgICAgIAogICAgPC9zY3JpcHQ+CjwvZGl2PgoKPC9ib2R5Pgo8L2h0bWw+" style="display:block;max-width:none;border:0;width:100%;height:450px;"></object></p><h2 id="Simulate-the-acquisition-and-reconstruct-the-data" tabindex="-1">Simulate the acquisition and reconstruct the data <a class="header-anchor" href="#Simulate-the-acquisition-and-reconstruct-the-data" aria-label="Permalink to &quot;Simulate the acquisition and reconstruct the data {#Simulate-the-acquisition-and-reconstruct-the-data}&quot;">​</a></h2><p>Define simulation parameters and perform simulation</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sim_params </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> KomaMRICore</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">default_sim_params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">raw </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> @suppress</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> simulate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj, seq, sys; sim_params)</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>RawAcquisitionData[SeqName: epi | 303 Profile(s) of 101×1]</span></span></code></pre></div><p>The simulated raw data stored the correct label for each profile</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">101</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">102</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">203</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  slc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> raw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">profiles[p]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">head</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">idx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">slice </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Int</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Profile n°</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> : SLC label = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$slc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Profile n°1 : SLC label = 0</span></span>
<span class="line"><span>Profile n°101 : SLC label = 0</span></span>
<span class="line"><span>Profile n°102 : SLC label = 1</span></span>
<span class="line"><span>Profile n°203 : SLC label = 2</span></span></code></pre></div><p>MRIReco splits the data into 3 when the data are converted to the AcquisitionData structure. The dimensions are (contrast / slice / repetitions)</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">acqData </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> AcquisitionData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(raw)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">acqData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">kdata </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> size</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>(1, 3, 1)</span></span></code></pre></div><p>For multi-slice acquisition, MRIReco uses the same trajectory. We need to crop the trajectory.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">size_readout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(acqData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">traj[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nodes,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Int</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">acqData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">traj[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nodes </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> acqData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">traj[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nodes[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">size_readout];</span></span></code></pre></div><p>We need to normalize the trajectory to -0.5 to 0.5</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">C </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> maximum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">abs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.(acqData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">traj[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nodes[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">acqData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">traj[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nodes </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">./=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> C</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">acqData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">traj[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">circular </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Removing circular window</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Nx, Ny </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> raw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">params[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;reconSize&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">][</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">recParams </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Dict{Symbol,Any}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">recParams[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:reconSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Nx, Ny)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">recParams[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:densityWeighting</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rec </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> reconstruction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(acqData, recParams)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">image </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> abs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">reshape</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rec,Nx,Ny,:));</span></span></code></pre></div><p>Let&#39;s take a look at the first 2 images</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">p2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> plot_image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(image[:,:,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], height</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">p3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> plot_image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(image[:,:,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], height</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>The signal ponderation is changing because we are acquiring the same slice position with a short TR sequence. Thus, the magnetization is not at equilibrium.</p><h2 id="Reconstruction-using-the-labels-LIN-and-PAR" tabindex="-1">Reconstruction using the labels LIN and PAR <a class="header-anchor" href="#Reconstruction-using-the-labels-LIN-and-PAR" aria-label="Permalink to &quot;Reconstruction using the labels LIN and PAR {#Reconstruction-using-the-labels-LIN-and-PAR}&quot;">​</a></h2><p>Rather than using the k-space trajectory calculated by KomaMRI and performing a NUFFT for the reconstruction, we can use the label LIN (phase encoding) and PAR (partition encoding).</p><p>First, we will create an increment label for LIN</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">seq_LIN </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PulseDesigner</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">EPI_example</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">lInc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> LabelInc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;LIN&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>We can put the increment at any stage between 2 ADC blocks. Here we will put it onto each ADC block.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">idx_ADC </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> is_ADC_on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.(seq_LIN)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> eachindex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(idx_ADC)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  idx_ADC[i] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> seq_LIN</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EXT[i] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [lInc] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div><p>Because we want the label of each ADC to start from 0, we set the value to -1 on the first block.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">seq_LIN</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EXT[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">LabelSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;LIN&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)];</span></span></code></pre></div><p>Let&#39;s check the LIN label for each ADC</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">l </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> get_label</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(seq_LIN)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">l[idx_ADC][</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>10-element Vector{AdcLabels}:</span></span>
<span class="line"><span> AdcLabels[ LIN = 0 | PAR = 0 | SLC = 0 | SEG = 0 | REP = 0 | AVG = 0 | SET = 0 | ECO = 0 | PHS = 0 | NAV = 0 | REV = 0 | SMS = 0 ]</span></span>
<span class="line"><span> AdcLabels[ LIN = 1 | PAR = 0 | SLC = 0 | SEG = 0 | REP = 0 | AVG = 0 | SET = 0 | ECO = 0 | PHS = 0 | NAV = 0 | REV = 0 | SMS = 0 ]</span></span>
<span class="line"><span> AdcLabels[ LIN = 2 | PAR = 0 | SLC = 0 | SEG = 0 | REP = 0 | AVG = 0 | SET = 0 | ECO = 0 | PHS = 0 | NAV = 0 | REV = 0 | SMS = 0 ]</span></span>
<span class="line"><span> AdcLabels[ LIN = 3 | PAR = 0 | SLC = 0 | SEG = 0 | REP = 0 | AVG = 0 | SET = 0 | ECO = 0 | PHS = 0 | NAV = 0 | REV = 0 | SMS = 0 ]</span></span>
<span class="line"><span> AdcLabels[ LIN = 4 | PAR = 0 | SLC = 0 | SEG = 0 | REP = 0 | AVG = 0 | SET = 0 | ECO = 0 | PHS = 0 | NAV = 0 | REV = 0 | SMS = 0 ]</span></span>
<span class="line"><span> AdcLabels[ LIN = 5 | PAR = 0 | SLC = 0 | SEG = 0 | REP = 0 | AVG = 0 | SET = 0 | ECO = 0 | PHS = 0 | NAV = 0 | REV = 0 | SMS = 0 ]</span></span>
<span class="line"><span> AdcLabels[ LIN = 6 | PAR = 0 | SLC = 0 | SEG = 0 | REP = 0 | AVG = 0 | SET = 0 | ECO = 0 | PHS = 0 | NAV = 0 | REV = 0 | SMS = 0 ]</span></span>
<span class="line"><span> AdcLabels[ LIN = 7 | PAR = 0 | SLC = 0 | SEG = 0 | REP = 0 | AVG = 0 | SET = 0 | ECO = 0 | PHS = 0 | NAV = 0 | REV = 0 | SMS = 0 ]</span></span>
<span class="line"><span> AdcLabels[ LIN = 8 | PAR = 0 | SLC = 0 | SEG = 0 | REP = 0 | AVG = 0 | SET = 0 | ECO = 0 | PHS = 0 | NAV = 0 | REV = 0 | SMS = 0 ]</span></span>
<span class="line"><span> AdcLabels[ LIN = 9 | PAR = 0 | SLC = 0 | SEG = 0 | REP = 0 | AVG = 0 | SET = 0 | ECO = 0 | PHS = 0 | NAV = 0 | REV = 0 | SMS = 0 ]</span></span></code></pre></div><p>We can now simulate the results</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">raw </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> @suppress</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> simulate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj, seq_LIN, sys; sim_params)</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>RawAcquisitionData[SeqName: epi | 101 Profile(s) of 101×1]</span></span></code></pre></div><p>In order to not use the NUFFT reconstruction of MRIReco.jl, we need to change the trajectory name to &quot;cartesian&quot;</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">raw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">params[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;trajectory&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;cartesian&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">raw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">params[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;encodedSize&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [seq</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DEF[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Nx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],seq</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DEF[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Ny&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]];</span></span></code></pre></div><p>We also need to estimate the profile center, which will be at the center of the readout. If it is not the case, it should be specified in <code>f.profiles[i].head.center_sample = center_sample</code> and <code>estimateProfileCenter = false</code></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">acqData </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> AcquisitionData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(raw,estimateProfileCenter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>Let&#39;s see the results</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">recParams </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Dict{Symbol,Any}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rec </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> reconstruction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(acqData, recParams);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">p4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">plot_image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">abs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.(rec[:,:,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]), height</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><hr><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl" target="_blank" rel="noreferrer">Literate.jl</a>.</em></p>`,60)])])}const y=i(t,[["render",h]]);export{M as __pageData,y as default};
