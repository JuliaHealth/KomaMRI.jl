<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Advanced Users ¬∑ KomaMRI.jl</title><meta name="title" content="Advanced Users ¬∑ KomaMRI.jl"/><meta property="og:title" content="Advanced Users ¬∑ KomaMRI.jl"/><meta property="twitter:title" content="Advanced Users ¬∑ KomaMRI.jl"/><meta name="description" content="Documentation for KomaMRI.jl."/><meta property="og:description" content="Documentation for KomaMRI.jl."/><meta property="twitter:description" content="Documentation for KomaMRI.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/extra-styles.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.svg" alt="KomaMRI.jl logo"/><img class="docs-dark-only" src="../../assets/logo-dark.svg" alt="KomaMRI.jl logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">üè† Home</a></li><li><a class="tocitem" href="../1-getting-started/">üèÉ Getting Started</a></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">üèãÔ∏è Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorial/01-FID/">Free Induction Decay</a></li><li><a class="tocitem" href="../../tutorial/02-SmallTipApproximation/">Small Tip Angle Approximation</a></li><li><a class="tocitem" href="../../tutorial/03-ChemicalShiftEPI/">Chemical Shift in an EPI sequence</a></li><li><a class="tocitem" href="../../tutorial/04-3DSliceSelective/">Slice-Selective Acquisition of 3D Phantom</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">üßë‚Äçüî¨ Reproducible Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorial-pluto/01-gradient-echo-spin-echo/">Understanding basic MRI sequences</a></li><li><a class="tocitem" href="../../tutorial-pluto/02-low-field-cmra-optimization/">Low-Field CMRA Optimization</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox" checked/><label class="tocitem" for="menuitem-5"><span class="docs-label">üë®‚Äçüç≥ How to</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../2-1-use-koma-ui/">Use Koma&#39;s User Interface</a></li><li><a class="tocitem" href="../2-2-use-koma-notebooks/">Use Koma in Notebooks</a></li><li><a class="tocitem" href="../2-3-use-koma-scripts/">Use Koma in Julia Scripts</a></li><li><a class="tocitem" href="../3-create-your-own-phantom/">Create Your Own Phantom</a></li><li><a class="tocitem" href="../3-create-your-own-sequence/">Create Your Own Sequence</a></li><li class="is-active"><a class="tocitem" href>Advanced Users</a><ul class="internal"><li><a class="tocitem" href="#Setup-your-Fork-of-KomaMRI"><span>Setup your Fork of KomaMRI</span></a></li><li><a class="tocitem" href="#Make-changes-to-remote-repos"><span>Make changes to remote repos</span></a></li><li><a class="tocitem" href="#About-Julia-Environments-and-Subdirectories"><span>About Julia Environments and Subdirectories</span></a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">ü§î Explanations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../explanation/1-sequence/">Sequence</a></li><li><a class="tocitem" href="../../explanation/2-seq-events/">Sequence Events</a></li><li><a class="tocitem" href="../../explanation/3-simulation/">Simulation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox"/><label class="tocitem" for="menuitem-7"><span class="docs-label">üë®‚Äçüíª Reference Guides</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../reference/1-api/">API Overview</a></li><li><a class="tocitem" href="../../reference/2-koma-base/">KomaMRIBase</a></li><li><a class="tocitem" href="../../reference/3-koma-core/">KomaMRICore</a></li><li><a class="tocitem" href="../../reference/4-koma-files/">KomaMRIFiles</a></li><li><a class="tocitem" href="../../reference/5-koma-plots/">KomaMRIPlots</a></li><li><a class="tocitem" href="../../reference/6-koma-mri/">KomaMRI</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">üë®‚Äçüç≥ How to</a></li><li class="is-active"><a href>Advanced Users</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Advanced Users</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaHealth/KomaMRI.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands">ÔÇõ</span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaHealth/KomaMRI.jl/blob/master/docs/src/how-to/4-develop.md" title="Edit source on GitHub"><span class="docs-icon fa-solid">ÔÅÑ</span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Advanced-Users"><a class="docs-heading-anchor" href="#Advanced-Users">Advanced Users</a><a id="Advanced-Users-1"></a><a class="docs-heading-anchor-permalink" href="#Advanced-Users" title="Permalink"></a></h1><p>If you really want to stay in tune with the most recent features, test some ideas or even contribute to the KomaMRI project, it is necessary to install and configure some tools in your machine:</p><ul><li>Juliaup: this is the manager for installing different versions of Julia.</li><li>Julia: this is the programming language. It is advisable you install it with Juliaup.</li><li>Git: this is a version control system which is handful for coding. <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">Installation</a>.</li><li>Github: this is a cloud-based Git repository which is handful for managing the KomaMRI project. <a href="https://docs.github.com/en/get-started/start-your-journey/creating-an-account-on-github">Create Account</a> </li><li>VScode: this is a code editor with support for development operations. <a href="https://code.visualstudio.com/docs/introvideos/basics">Installation</a></li><li>VScode Plugings: they enable VSCode to have more handy features. We recommend you to install the following: &quot;Julia&quot;, &quot;Git Graph&quot;, &quot;GitHub Pull Requests&quot;.</li></ul><h2 id="Setup-your-Fork-of-KomaMRI"><a class="docs-heading-anchor" href="#Setup-your-Fork-of-KomaMRI">Setup your Fork of KomaMRI</a><a id="Setup-your-Fork-of-KomaMRI-1"></a><a class="docs-heading-anchor-permalink" href="#Setup-your-Fork-of-KomaMRI" title="Permalink"></a></h2><p>Once everything is installed, you need to create a fork of the KomaMRI repo in your Github account. Go to the official KomaMRI repo https://github.com/JuliaHealth/KomaMRI.jl and follow the bellow steps:</p><p><img src="../../assets/dev-fork.png" alt/> <img src="../../assets/dev-fork-create.png" alt/></p><p>Now, your fork of KomaMRI should look like this:</p><p><img src="../../assets/dev-fork-github.png" alt/></p><p>Now you need to clone your fork of the KomaMRI repo. In julia you can do this by opening a terminal and typing (make sure you change the <code>&lt;github-username&gt;</code>):</p><pre><code class="language-julia-repl hljs">(@v1.10) pkg&gt; dev https://github.com/&lt;github-username&gt;/KomaMRI.jl</code></pre><p>This saves the local git project at the <code>~/.julia/dev/KomaMRI/</code> directory. You can open VScode and open this folder, it should look like this:</p><p><img src="../../assets/dev-vscode-git-project.png" alt/></p><p>Everything looks good. Let&#39;s run KomaMRI, but before you can do so, you need to setup the Julia environment. The information of the environment is ultimately defined by the file <code>Manifest.toml</code>, however you don&#39;t have that file yet. So you need to create it from the information of the <code>Project.toml</code>.</p><p>Let&#39;s select the environment of our KomaMRI project:</p><p><img src="../../assets/dev-vscode-select-komamri-environment.png" alt/></p><p>Now, open a Julia REPL:</p><p><img src="../../assets/dev-open-julia-repl.png" alt/></p><p>In the Julia REPL you have to create the <code>Manifest.toml</code> file with the <code>develop</code> command considering de local folders <code>KomaMRIBase</code>, <code>KomaMRICore</code>, <code>KomaMRIFiles</code> and <code>KomaMRIPlots</code>. Additionally you can install all the dependencies listed in the <code>Manifest.toml</code> with the <code>instantiate</code> command:</p><pre><code class="language-julia-repl hljs">(KomaMRI) pkg&gt; dev ./KomaMRIBase ./KomaMRICore ./KomaMRIFiles ./KomaMRIPlots

(KomaMRI) pkg&gt; instantiate</code></pre><p>With these steps your environment is setup. You can now run the KomaMRI user interface:</p><pre><code class="language-julia-repl hljs">julia&gt; using KomaMRI

julia&gt; KomaUI()</code></pre><p><img src="../../assets/dev-launch-ui.png" alt/></p><p>Let&#39;s see what is the default phantom in the user interface by clicking in the <code>Phantom dropdown</code> and then press the <code>View Phantom</code> button:</p><p><img src="../../assets/dev-default-phantom-brain.png" alt/> </p><p>You can close the KomaMRI user interface.</p><h2 id="Make-changes-to-remote-repos"><a class="docs-heading-anchor" href="#Make-changes-to-remote-repos">Make changes to remote repos</a><a id="Make-changes-to-remote-repos-1"></a><a class="docs-heading-anchor-permalink" href="#Make-changes-to-remote-repos" title="Permalink"></a></h2><p>So far so good. However you want to make some changes to your Github Fork and even you want to contribute to the KomaMRI project. But first, let&#39;s make some local changes in the local git repo. In the following example we will change the default phantom displayed in the user interface.</p><p>First create a branch with a descriptive name, in this case <code>patch-ui-default-phantom</code>:</p><p><img src="../../assets/dev-branch.png" alt/> <img src="../../assets/dev-branch-name.png" alt/></p><p>In this new branch, we are going to edit the <code>setup_phantom</code> function located in the file <code>src/ui/ExportUIFunctions.jl</code>. We simply replace the line where a brain phantom is defined by the function <code>pelvis_brain2D</code>: </p><p><img src="../../assets/dev-branch-edit.png" alt/></p><p>Then, you need to compile the function <code>setup_phantom</code>, simply put the cursor in a place inside the function <code>setup_phantom</code> and then press <code>Alt + Enter</code>:</p><p><img src="../../assets/dev-branch-compile.png" alt/></p><p>Now, let&#39;s see what is the new default phantom in the user interface by clicking in the <code>Phantom dropdown</code> and then press the <code>View Phantom</code> button:</p><pre><code class="language-julia-repl hljs">julia&gt; KomaUI()</code></pre><p><img src="../../assets/dev-default-phantom-pelvis.png" alt/></p><p>Everything looks good, let&#39;s stage the changes:</p><p><img src="../../assets/dev-stage-changes.png" alt/></p><p>And commit the changes:</p><p><img src="../../assets/dev-commit-changes.png" alt/></p><p>Let&#39;s upload these changes in your github fork or to the official KomaMRI repo by selecting the <code>origin</code> or the <code>upstream</code> option:</p><p><img src="../../assets/dev-publish.png" alt/></p><p><img src="../../assets/dev-pullreq.png" alt/></p><p><img src="../../assets/dev-pullreq-name.png" alt/></p><h2 id="About-Julia-Environments-and-Subdirectories"><a class="docs-heading-anchor" href="#About-Julia-Environments-and-Subdirectories">About Julia Environments and Subdirectories</a><a id="About-Julia-Environments-and-Subdirectories-1"></a><a class="docs-heading-anchor-permalink" href="#About-Julia-Environments-and-Subdirectories" title="Permalink"></a></h2><p>So far, the <code>KomaMRI</code> package have 4 subdirectories <code>KomaMRIBase</code>, <code>KomaMRICore</code>, <code>KomaMRIPlots</code> and <code>KomaMRIFiles</code>. These subdirectories are proper julia packages by themselves, so they have their own <code>Project.toml</code> which need to resolve an environment defined ultimately by a <code>Manifest.toml</code>.</p><p>This is how these packages are related:</p><ul><li><code>KomaMRIBase</code> doesn&#39;t depend on any of these other subdirectories.</li><li><code>KomaMRICore</code> depends directly on <code>KomaMRIBase</code></li><li><code>KomaMRIPlots</code> depends directly on <code>KomaMRIBase</code></li><li><code>KomaMRIFiles</code> depends directly on <code>KomaMRIBase</code></li><li><code>KomaMRI</code> depends directly on <code>KomaMRICore</code>, <code>KomaMRIPlots</code> and <code>KomaMRIFiles</code></li></ul><p>If you want to edit only the direct contents of one of these packages, you simply need to activate the julia package and then instantiate to generate the <code>Manifest.toml</code> and install dependencies. However, if you want to make changes that involve the packages and it&#39;s direct dependencies you need to create an environment that indicates so.</p><p>For instance, to edit <code>KomaMRICore</code> and its direct dependency <code>KomaMRIBase</code> you need to create the <code>Manifest.toml</code> like so:</p><pre><code class="language-julia-repl hljs">user@machine ~/.julia/dev/KomaMRI
$ julia

(@v1.10) pkg&gt; activate KomaMRICore

(KomaMRICore) pkg&gt; dev ./KomaMRIBase</code></pre><p>And for creating the <code>Manifest.toml</code> file of <code>KomaMRI</code>which considers all the subdirectories you have to do:</p><pre><code class="language-julia-repl hljs">user@machine ~/.julia/dev/KomaMRI
$ julia

(@v1.10) pkg&gt; activate .

(KomaMRI) pkg&gt; dev ./KomaMRIBase ./KomaMRICore ./KomaMRIFiles ./KomaMRIPlots</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../3-create-your-own-sequence/">¬´ Create Your Own Sequence</a><a class="docs-footer-nextpage" href="../../explanation/1-sequence/">Sequence ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.0 on <span class="colophon-date" title="Tuesday 23 April 2024 17:34">Tuesday 23 April 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
